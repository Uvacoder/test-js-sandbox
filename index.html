<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript Sandbox</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        background-color: slateblue;
        color: seashell;
        font-family: 'Inter', sans-serif;
        font-size: 1.25rem;
      }

      textarea {
        height: 100vh;
        width: 100%;
        font-family: 'Droid Sans Mono', 'Courier New', Courier, monospace;
        font-size: 1.25rem;
        background-color: snow;
        color: darkslategray;
        padding: 2rem;
        border: none;
        white-space: pre-line;
      }

      iframe {
        height: 100vh;
        width: 100%;
        border: none;
      }
    </style>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <textarea id="textarea">
      const headingEl = document.querySelector('h1');
      headingEl.style.color = 'wheat';
    </textarea>

    <iframe id="iframe"></iframe>

    <script>
      const getEl = (id) => document.getElementById(id)

      const iframeEl = getEl('iframe')
      const textareaEl = getEl('textarea')

      const html = `
        <h1>Hello, World!</h1>
        <p>Just some sweet text.</p>
      `

      const css = `
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          width: 100vw;
          font-family: 'Inter', sans-serif;
          color: snow;
          padding: 2rem;
      }`

      const js = textareaEl.value.trim()

      function setIframeContent(iframe, { html, css, js }) {
        iframe.srcdoc = `
          <html>
            <head>
              <style>${css}</style>
            </head>
            ${html}
            <script>${js}<\/script>
          </html>
        `
      }

      textareaEl.addEventListener(
        'keyup',
        setIframeContent(iframeEl, { html, css, js })
      )
    </script>
  </body>
</html>
